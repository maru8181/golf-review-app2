<h1><%= @golf.name %></h1>

<% if @tweets.count > 0 %>
  <% sum = 0 %>
  <% @tweets.each do |t| %>
    <% sum += t.point.valuation %>
  <% end %>
  <% val = sum/@tweets.count %>
  <p>みんなの評価　<%= val.round(1) %></p>
<% else %>
  <p>みんなの評価　0</p>
<% end %>

<p><%= @tweets.count %>件の評価</p>
<hr>

<% @tweets.each do |tweet| %>
  <p>評価：<%= tweet.point.valuation.floor %></p>
  <p><%= tweet.text %></p>
  <p><%= link_to '詳細', tweet %></p>

  <% if tweet.image? %>
    <%= image_tag tweet.image.url %>
  <% end %>

  <p>投稿者：<%= link_to "#{tweet.user.username}", member_path(User.find(tweet.user.id)) %></p>

  <div id="likes_buttons_<%= tweet.id %>">
    <%= render partial: 'likes/like', locals: { tweet: tweet, likes: @likes} %>
  </div>

  <% if current_user == tweet.user || current_user.admin? %>
    <%= link_to '編集', edit_tweet_path(tweet) %>
    <%= link_to '削除', tweet, method: :delete, data: { confirm: '本当に削除しますか?' } %><hr>
  <% end %>

<% end %>
